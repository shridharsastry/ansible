# when generating the pub/priv key make sure to give the -C option 
#for example ssh-keygen -t rsa -b 4096 -C <username>
#This will make sure the authentication is done against username. If -C option is not given then it defaults to username@servername
#For ubuntu make sure openssh-server is installed before running this command
#Make sure to run export ANSIBLE_HOST_KEY_CHECKING=False and then make it TRUE
---
  - hosts: all
    tasks:
      - name: copy ssh key to remote servers
        authorized_key:
          user: "sshastry"
          state: present
          key: "{{ lookup('file', '~/.ssh/id_rsa.pub') }}"
